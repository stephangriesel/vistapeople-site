---
const menuitems = [
  { title: "Home", path: "/#home" },
  { title: "About", path: "/#about" },
  { title: "Services", path: "/#services" },
  { title: "Why", path: "/#why" },
  { title: "Contact", path: "/#contact" },
  { title: "Careers", path: "/#careers" },
  { title: "Pages", path: "javascript:void(0)", children: [] },
];

const isHome = Astro.url.pathname === "/";

const navLinkColorClass = isHome
  ? "text-black dark:text-white lg:text-white hover:opacity-70"
  : "text-black dark:text-white hover:text-primary";

const themeSwitcherColorClass = isHome
  ? "text-white hover:opacity-70"
  : "text-black dark:text-white hover:text-primary";

const hamburgerColorClass = isHome ? "bg-white" : "bg-dark dark:bg-white";
---

<header
  class="ud-header absolute top-0 left-0 z-40 flex w-full items-center bg-transparent"
>
  <div class="container">
    <div class="relative -mx-4 flex items-center justify-between my-5">
      <div class="flex max-w-full px-4">
        <div>
          <a
            href="/"
            class="navbar-logo flex items-center whitespace-nowrap w-full"
          >
            <span class="header-logo text-white roboto-bold-900 text-4xl"
              >Vista</span
            >
            <span class="fira-sans-text text-white text-4xl">People</span>
          </a>
        </div>
      </div>

      <div class="flex w-full items-center justify-evenly px-4">
        <div>
          <button
            id="navbarToggler"
            class="absolute right-4 top-1/2 block -translate-y-1/2 rounded-lg px-3 ring-primary focus:ring-2 lg:hidden"
          >
            <span
              class={`relative my-[6px] block h-[2px] w-[30px] ${hamburgerColorClass}`}
            ></span>
            <span
              class={`relative my-[6px] block h-[2px] w-[30px] ${hamburgerColorClass}`}
            ></span>
            <span
              class={`relative my-[6px] block h-[2px] w-[30px] ${hamburgerColorClass}`}
            ></span>
          </button>

          <nav
            id="navbarCollapse"
            class="absolute right-4 top-full hidden w-full max-w-[250px] rounded-lg bg-white dark:bg-dark-2 py-5 shadow-lg lg:static lg:block lg:w-full lg:max-w-full lg:bg-transparent dark:lg:bg-transparent lg:py-0 xl:px-4 lg:shadow-none 2xl:px-6"
          >
            <ul class="block lg:flex 2xl:ml-20">
              {
                menuitems.map((item, index) => {
                  if (!item.children) {
                    return (
                      <li class="group relative">
                        <a
                          href={item.path}
                          class={`
                            mx-8 flex py-2 font-medium text-base lg:mr-0 lg:ml-7 lg:inline-flex lg:py-6 lg:px-0 xl:ml-10
                            whitespace-nowrap 
                            ${navLinkColorClass}
                          `}
                        >
                          {item.title}
                        </a>
                      </li>
                    );
                  }
                })
              }
            </ul>
          </nav>
        </div>

        <div class="justify-end pr-16 flex items-center lg:pr-0">
          <button
            class="inline-flex cursor-pointer items-center"
            id="themeSwitcher"
          >
            <span class={`hidden dark:block ${themeSwitcherColorClass}`}>
              <svg
                width="24"
                height="24"
                viewBox="0 0 24 24"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
              >
                <g
                  stroke="currentColor"
                  stroke-width="2"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                >
                  <circle cx="12" cy="12" r="5"></circle>
                  <path d="M12 1v2"></path>
                  <path d="M12 21v2"></path>
                  <path d="M4.22 4.22l1.42 1.42"></path>
                  <path d="M18.36 18.36l1.42 1.42"></path>
                  <path d="M1 12h2"></path>
                  <path d="M21 12h2"></path>
                  <path d="M4.22 19.78l1.42-1.42"></path>
                  <path d="M18.36 5.64l1.42-1.42"></path>
                </g>
              </svg>
            </span>
            <span class={`block dark:hidden ${themeSwitcherColorClass}`}>
              <svg
                width="24"
                height="24"
                viewBox="0 0 24 24"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
              >
                <path
                  d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79Z"
                  stroke="currentColor"
                  stroke-width="2"
                  stroke-linecap="round"
                  stroke-linejoin="round"></path>
              </svg>
            </span>
          </button>
        </div>
      </div>
    </div>
  </div>
</header>

<style>
  /* === STICKY HEADER OVERRIDES ===
   This CSS forces the header to be DARK when you scroll down.
   It overrides the default JS behavior (which usually makes it white).
  */

  /* 1. Force Background to be Dark Gray (matches your dark theme) */
  :global(.sticky-header) {
    background-color: rgba(17, 25, 40, 0.8) !important;
    backdrop-filter: blur(5px);
    box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
  }

  /* 2. Force Logo Text to be White */
  :global(.sticky-header) .header-logo,
  :global(.sticky-header) .fira-sans-text {
    color: #ffffff !important;
  }

  /* 3. Force Menu Links to be White (Desktop Only) */
  @media (min-width: 1024px) {
    :global(.sticky-header) #navbarCollapse li > a {
      color: #ffffff !important;
    }
  }

  /* 4. Force Hamburger Menu Lines to be White */
  :global(.sticky-header) #navbarToggler span {
    background-color: #ffffff !important;
  }

  /* 5. Force Theme Switcher Icon to be White */
  :global(.sticky-header) #themeSwitcher span {
    color: #ffffff !important;
  }
</style>
