---
const menuitems = [
  { title: "Home", path: "/#home" },
  { title: "About", path: "/#about" },
  { title: "Services", path: "/#services" },
  { title: "Why", path: "/#why" },
  { title: "Contact", path: "/#contact" },
  { title: "Pages", path: "javascript:void(0)", children: [] },
];

// LOGIC FIX: Determine current page state once
const isHome = Astro.url.pathname === "/";

// Define dynamic classes based on location
// If Home: Text is White.
// If Not Home: Text is Dark (on light mode) or White (on dark mode).
const navLinkColorClass = isHome 
  ? "text-white hover:opacity-70" 
  : "text-dark dark:text-white hover:text-primary";

// Fix for Hamburger Menu Bars:
// If Home: Bars are White.
// If Not Home: Bars are Dark (Light mode) or White (Dark mode).
const hamburgerColorClass = isHome 
  ? "bg-white" 
  : "bg-dark dark:bg-white";
---

<header
  class="ud-header absolute top-0 left-0 z-40 flex w-full items-center bg-transparent"
>
  <div class="container">
    <div class="relative -mx-4 flex items-center justify-between my-5">
      <div class="flex max-w-full px-4">
        <div>
          <a href="/" class="navbar-logo block w-full">
            <span class="header-logo w-[8em] text-white roboto-bold-900 text-4xl">Vista</span>
            <span class="fira-sans-text text-white text-4xl">People</span>
          </a>
        </div>
      </div>
      
      <div class="flex w-full items-center justify-evenly px-4">
        <div>
          <button
            id="navbarToggler"
            class="absolute right-4 top-1/2 block -translate-y-1/2 rounded-lg px-3 ring-primary focus:ring-2 lg:hidden"
          >
            <span class={`relative my-[6px] block h-[2px] w-[30px] ${hamburgerColorClass}`}></span>
            <span class={`relative my-[6px] block h-[2px] w-[30px] ${hamburgerColorClass}`}></span>
            <span class={`relative my-[6px] block h-[2px] w-[30px] ${hamburgerColorClass}`}></span>
          </button>
          
          <nav
            id="navbarCollapse"
            class="absolute right-4 top-full hidden w-full max-w-[250px] rounded-lg bg-white dark:bg-dark-2 py-5 shadow-lg lg:static lg:block lg:w-full lg:max-w-full lg:bg-transparent dark:lg:bg-transparent lg:py-0 xl:px-4 lg:shadow-none 2xl:px-6"
          >
            <ul class="block lg:flex 2xl:ml-20">
              {
                menuitems.map((item, index) => {
                  if (!item.children) {
                    return (
                      <li class="group relative">
                        <a
                          href={item.path}
                          class={`
                            mx-8 flex py-2 font-medium text-base lg:mr-0 lg:ml-7 lg:inline-flex lg:py-6 lg:px-0 xl:ml-10
                            whitespace-nowrap 
                            ${navLinkColorClass}
                          `}
                        >
                          {item.title}
                        </a>
                      </li>
                    );
                  }
                })
              }
            </ul>
          </nav>
        </div>
        
        <div class="justify-end pr-16 flex items-center lg:pr-0">
          <button
            class="inline-flex cursor-pointer items-center"
            id="themeSwitcher"
          >
           <span class={`hidden dark:block ${navLinkColorClass}`}>
              </span>
            <span class={`block dark:hidden ${navLinkColorClass}`}>
               </span>
          </button>
        </div>
      </div>
    </div>
  </div>
</header>
