---
// src/pages/jobs/[slug].astro
import type { CollectionEntry } from 'astro:content';
import { getCollection } from 'astro:content';
// IMPORTANT: Update this path to point to your main layout file
import BaseLayout from '../../layouts/Layout.astro'; 

export async function getStaticPaths() {
  const jobs = await getCollection('jobs');
  return jobs.map(job => ({
    params: { slug: job.slug },
    props: { job },
  }));
}

type Props = {
  job: CollectionEntry<'jobs'>;
};

const { job } = Astro.props;
const { Content } = await job.render();
---
<BaseLayout 
  title={job.data.title}
  description={`Apply for the ${job.data.title} position. Location: ${job.data.location}.`}
>
  <main class="container mx-auto px-4 py-12">
    <article class="prose lg:prose-xl max-w-4xl mx-auto">
      <h1>{job.data.title}</h1>
      <p class="lead">
        <strong>Location:</strong> {job.data.location} | 
        <strong>Type:</strong> {job.data.type} | 
        <strong>Posted:</strong> {job.data.pubDate.toLocaleDateString()}
      </p>
      <hr class="my-8" />
      <Content />
      <a href="/jobs/" class="mt-12 inline-block no-underline">&larr; Back to all positions</a>
    </article>
  </main>
</BaseLayout>